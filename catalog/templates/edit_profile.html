{% block content %}
<style>
  .profile-wrapper {
    max-width: 640px;
    margin: 32px auto;
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 18px 45px rgba(15, 23, 42, 0.12);
    padding: 28px 32px 32px;
    box-sizing: border-box;
  }
  .profile-title {
    font-size: 22px;
    font-weight: 700;
    color: #111827;
    margin-bottom: 6px;
  }
  .profile-subtitle {
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 18px;
  }
  .profile-row {
    display: flex;
    align-items: center;
    margin-bottom: 14px;
    font-size: 14px;
  }
  .profile-label {
    width: 70px;
    color: #374151;
    font-weight: 600;
  }
  .profile-input {
    flex: 1;
  }
  .profile-input input[type="text"] {
    width: 100%;
    padding: 8px 10px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    font-size: 14px;
    box-sizing: border-box;
  }
  .profile-input input[type="file"] {
    font-size: 13px;
  }
  .profile-avatar-block {
    margin-top: 12px;
    display: flex;
    align-items: center;
    gap: 16px;
  }
  .profile-avatar-block img {
    width: 110px;
    height: 110px;
    border-radius: 999px;
    object-fit: cover;
    box-shadow: 0 6px 18px rgba(15, 23, 42, 0.25);
  }
  .profile-msg-success {
    color: #059669;
    font-size: 14px;
    margin-bottom: 10px;
  }
  .profile-msg-error {
    color: #b91c1c;
    font-size: 14px;
    margin-bottom: 10px;
  }
  .profile-actions {
    margin-top: 22px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .btn-primary {
    padding: 8px 18px;
    border-radius: 999px;
    border: none;
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    color: #ffffff;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
  }
  .btn-secondary {
    padding: 8px 18px;
    border-radius: 999px;
    border: 1px solid #d1d5db;
    background: #f9fafb;
    color: #374151;
    font-weight: 500;
    font-size: 14px;
    text-decoration: none;
  }
</style>

<div class="profile-wrapper">
  <div class="profile-title">修改個人資訊</div>
  <div class="profile-subtitle">更新姓名與大頭貼，讓老師更容易認出你。</div>

  {% if error %}
    <p class="profile-msg-error">{{ error }}</p>
  {% endif %}
  {% if success %}
    <p class="profile-msg-success">{{ success }}</p>
  {% endif %}

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="profile-row">
      <div class="profile-label">帳號：</div>
      <div class="profile-input">
        <span>{{ profile.user.username }}</span>
      </div>
    </div>

    <div class="profile-row">
      <div class="profile-label">姓名：</div>
      <div class="profile-input">
        <input type="text" id="full_name" name="full_name" value="{{ profile.full_name }}">
      </div>
    </div>

    <div class="profile-row">
      <div class="profile-label">頭像：</div>
      <div class="profile-input">
        <input type="file" id="avatar" name="avatar">
      </div>
    </div>

    {% if profile.avatar_url %}
      <div class="profile-avatar-block">
        <div style="font-size:14px; color:#4b5563;">目前頭像：</div>
        <img src="{{ profile.avatar_url }}" alt="目前頭像">
      </div>
    {% endif %}

    <div class="profile-actions">
      <button type="submit" class="btn-primary">儲存</button>
      <a href="{% url 'student_dashboard' %}" class="btn-secondary">← 回到主畫面</a>
    </div>
  </form>
</div>
{% endblock %}
